<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Trang ƒê·ªçc Truy·ªán</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f7f7f7;
      color: #333;
    }

    header {
      background: #2d89ef;
      color: white;
      padding: 15px;
      text-align: center;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    main {
      padding: 20px;
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
      min-height: calc(100vh - 160px);
    }

    .truyen-card {
      width: 180px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
      overflow: hidden;
      text-align: center;
      transition: 0.2s;
      cursor: pointer;
    }

    .truyen-card:hover {
      transform: translateY(-4px);
    }

    .truyen-card img {
      width: 100%;
      height: 240px;
      object-fit: cover;
    }

    .truyen-card h3 {
      padding: 10px;
      font-size: 16px;
      margin: 0;
    }

    footer {
      background: #2d89ef;
      color: white;
      text-align: center;
      padding: 10px;
      margin-top: auto;
    }

    /* Styles for reading page */
    .reading-container {
      width: 100%;
      max-width: 1000px;
      margin: 0 auto;
      padding: 20px;
    }

    .chapter-controls {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
      background: white;
      padding: 10px;
      border-radius: 5px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .chapter-controls select, .chapter-controls button {
      padding: 8px 15px;
      border: 1px solid #ddd;
      border-radius: 4px;
      background: white;
      font-size: 16px;
      cursor: pointer;
    }

    .chapter-controls button:hover {
      background: #f0f0f0;
    }

    .chapter-title {
      text-align: center;
      margin: 10px 0 20px;
      font-size: 24px;
    }

    .manga-page {
      width: 100%;
      margin-bottom: 10px;
      text-align: center;
    }

    .manga-page img {
      max-width: 100%;
      height: auto;
      border-radius: 5px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }

    .page-controls {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin: 20px 0;
    }

    .hidden {
      display: none;
    }
  </style>
</head>
<body>
  <header>
    <h1>üìñ Web ƒê·ªçc Truy·ªán</h1>
  </header>

  <main id="main-content">
    <div id="truyen-list">
      <!-- Danh s√°ch truy·ªán s·∫Ω ƒë∆∞·ª£c load b·∫±ng JavaScript -->
    </div>

    <div id="reading-page" class="hidden">
      <div class="reading-container">
        <div class="chapter-controls">
          <button id="prev-chap">Chap tr∆∞·ªõc</button>
          <select id="chap-select"></select>
          <button id="next-chap">Chap sau</button>
        </div>
        <h2 class="chapter-title" id="chapter-title"></h2>
        <div id="manga-pages"></div>
        <div class="page-controls">
          <button id="prev-page">Trang tr∆∞·ªõc</button>
          <span id="page-indicator">Trang 1/1</span>
          <button id="next-page">Trang sau</button>
        </div>
      </div>
    </div>
  </main>

  <footer>
    <p>Made with ‚ù§Ô∏è by xFear</p>
  </footer>

  <script>
    // Danh s√°ch truy·ªán
    const truyenList = [
      {
        ten: "Manhwa1",
        folder: "Manhwa1",
        cover: "Manhwa1/bg.jpg",
        soChap: 97
      }
    ];

    // Bi·∫øn to√†n c·ª•c
    let currentTruyen = null;
    let currentChap = 1;
    let currentPage = 1;
    let totalPages = 0;

    // Kh·ªüi t·∫°o trang
    document.addEventListener('DOMContentLoaded', function() {
      renderTruyenList();
      
      // X·ª≠ l√Ω s·ª± ki·ªán navigation
      document.getElementById('prev-chap').addEventListener('click', goToPrevChap);
      document.getElementById('next-chap').addEventListener('click', goToNextChap);
      document.getElementById('prev-page').addEventListener('click', goToPrevPage);
      document.getElementById('next-page').addEventListener('click', goToNextPage);
      document.getElementById('chap-select').addEventListener('change', function() {
        goToChap(parseInt(this.value));
      });
    });

    // Render danh s√°ch truy·ªán
    function renderTruyenList() {
      const listEl = document.getElementById("truyen-list");
      listEl.innerHTML = '';

      truyenList.forEach(truyen => {
        const card = document.createElement("div");
        card.className = "truyen-card";
        card.innerHTML = `
          <img src="${truyen.cover}" alt="${truyen.ten}" onerror="this.src='https://via.placeholder.com/180x240?text=·∫¢nh+b√¨a'">
          <h3>${truyen.ten}</h3>
          <p>${truyen.soChap} ch∆∞∆°ng</p>
        `;
        card.addEventListener('click', () => openTruyen(truyen));
        listEl.appendChild(card);
      });
    }

    // M·ªü truy·ªán ƒë·ªÉ ƒë·ªçc
    function openTruyen(truyen) {
      currentTruyen = truyen;
      currentChap = 1;
      
      // ·∫®n danh s√°ch, hi·ªán trang ƒë·ªçc
      document.getElementById('truyen-list').classList.add('hidden');
      document.getElementById('reading-page').classList.remove('hidden');
      
      // C·∫≠p nh·∫≠t ti√™u ƒë·ªÅ
      document.querySelector('header h1').textContent = `üìñ ${truyen.ten}`;
      
      // T·∫°o dropdown ch·ªçn chap
      const chapSelect = document.getElementById('chap-select');
      chapSelect.innerHTML = '';
      for (let i = 1; i <= truyen.soChap; i++) {
        const option = document.createElement('option');
        option.value = i;
        option.textContent = `Ch∆∞∆°ng ${i}`;
        if (i === currentChap) option.selected = true;
        chapSelect.appendChild(option);
      }
      
      // Load chap ƒë·∫ßu ti√™n
      loadChap(currentChap);
    }

    // Quay l·∫°i trang ch·ªß
    function goHome() {
      document.getElementById('reading-page').classList.add('hidden');
      document.getElementById('truyen-list').classList.remove('hidden');
      document.querySelector('header h1').textContent = 'üìñ Web ƒê·ªçc Truy·ªán';
    }

    // Load n·ªôi dung chap
    function loadChap(chapNumber) {
      if (!currentTruyen) return;
      
      currentChap = chapNumber;
      currentPage = 1;
      
      // C·∫≠p nh·∫≠t dropdown
      document.getElementById('chap-select').value = chapNumber;
      document.getElementById('chapter-title').textContent = `${currentTruyen.ten} - Ch∆∞∆°ng ${chapNumber}`;
      
      // Ki·ªÉm tra s·ªë trang trong chap (gi·∫£ ƒë·ªãnh m·ªói chap c√≥ 20 trang)
      // Trong th·ª±c t·∫ø, b·∫°n c√≥ th·ªÉ l·∫•y th√¥ng tin n√†y t·ª´ server ho·∫∑c c·∫•u h√¨nh
      totalPages = 20; // Gi·∫£ ƒë·ªãnh m·ªói chap c√≥ 20 trang
      
      // Load trang ƒë·∫ßu ti√™n
      loadPage(currentPage);
    }

    // Load trang c·ª• th·ªÉ
    function loadPage(pageNumber) {
      if (!currentTruyen || pageNumber < 1 || pageNumber > totalPages) return;
      
      currentPage = pageNumber;
      
      // C·∫≠p nh·∫≠t indicator
      document.getElementById('page-indicator').textContent = `Trang ${pageNumber}/${totalPages}`;
      
      // Hi·ªÉn th·ªã ·∫£nh
      const mangaPages = document.getElementById('manga-pages');
      mangaPages.innerHTML = '';
      
      const img = document.createElement('img');
      img.src = `${currentTruyen.folder}/Chap${currentChap}/${pageNumber}.jpg`;
      img.alt = `Trang ${pageNumber}`;
      img.onerror = function() {
        this.src = 'https://via.placeholder.com/800x1200?text=Kh√¥ng+t√¨m+th·∫•y+trang';
      };
      
      const pageDiv = document.createElement('div');
      pageDiv.className = 'manga-page';
      pageDiv.appendChild(img);
      mangaPages.appendChild(pageDiv);
    }

    // ƒêi·ªÅu h∆∞·ªõng gi·ªØa c√°c chap
    function goToPrevChap() {
      if (currentChap > 1) {
        loadChap(currentChap - 1);
      }
    }

    function goToNextChap() {
      if (currentTruyen && currentChap < currentTruyen.soChap) {
        loadChap(currentChap + 1);
      }
    }

    function goToChap(chapNumber) {
      if (chapNumber >= 1 && chapNumber <= currentTruyen.soChap) {
        loadChap(chapNumber);
      }
    }

    // ƒêi·ªÅu h∆∞·ªõng gi·ªØa c√°c trang
    function goToPrevPage() {
      if (currentPage > 1) {
        loadPage(currentPage - 1);
      } else if (currentChap > 1) {
        // N·∫øu ƒëang ·ªü trang ƒë·∫ßu, chuy·ªÉn ƒë·∫øn chap tr∆∞·ªõc
        goToPrevChap();
        loadPage(totalPages); // Load trang cu·ªëi c·ªßa chap tr∆∞·ªõc
      }
    }

    function goToNextPage() {
      if (currentPage < totalPages) {
        loadPage(currentPage + 1);
      } else if (currentTruyen && currentChap < currentTruyen.soChap) {
        // N·∫øu ƒëang ·ªü trang cu·ªëi, chuy·ªÉn ƒë·∫øn chap sau
        goToNextChap();
        loadPage(1); // Load trang ƒë·∫ßu c·ªßa chap sau
      }
    }

    // Th√™m n√∫t quay l·∫°i trang ch·ªß
    const header = document.querySelector('header');
    const homeButton = document.createElement('button');
    homeButton.textContent = 'Trang ch·ªß';
    homeButton.style.position = 'absolute';
    homeButton.style.left = '15px';
    homeButton.style.top = '15px';
    homeButton.style.padding = '5px 10px';
    homeButton.style.background = 'white';
    homeButton.style.color = '#2d89ef';
    homeButton.style.border = 'none';
    homeButton.style.borderRadius = '3px';
    homeButton.style.cursor = 'pointer';
    homeButton.addEventListener('click', goHome);
    header.style.position = 'relative';
    header.appendChild(homeButton);
  </script>
</body>
</html>